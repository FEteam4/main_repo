<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./index.css" />
    <title>Final Pass</title>
    <style>
      @font-face {
        font-family: "GmarketSansMedium";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff")
          format("woff");
        font-weight: normal;
        font-style: normal;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: "GmarketSansMedium";
        background-color: black;
        color: white;
      }

      .page {
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
      }

      /* 배경 이미지 (원하시면 교체) */
      .bg-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1;
      }

      /* 캐릭터 */
      .character {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 30;
        height: 60vh; /* 필요에 따라 조절 */
        width: auto;
      }

      /* 오른쪽 상태창 전체 컨테이너 */
      .status-container {
        position: absolute;
        top: 10%;
        right: 5%;
        width: 300px; /* 전체 너비 (필요 시 조정) */
        z-index: 3;
      }
      /* 배경(블러) 효과 */
      .status_background {
        position: absolute;
        top: 0;
        left: 0;
        width: 289px;
        height: 246px;
        opacity: 0.51;
        background: #5fcdfc;
        box-shadow: 100px 100px 100px;
        border-radius: 50px;
        filter: blur(50px);
        z-index: -1; /* 그래프 뒤로 배치 */
      }

      /* 각 스탯 항목 */
      .stat-item {
        position: relative;
        margin-bottom: 40px; /* 항목 간 간격 */
      }
      .stat-label {
        font-size: 1.2rem;
        margin-bottom: 5px;
      }

      /* 큰 막대(배경) */
      .status_big_bar {
        position: relative; /* 내부 절대배치 위해 relative 사용 */
        border-radius: 50px;
        background-color: #fff;
        border: 1px solid #5fcdfc;
        width: 232px;
        height: 29.3px;
      }

      /* 채워지는 막대 (동적으로 width 지정) */
      .status_name_bar {
        position: absolute;
        top: 2.8px;
        left: 3.49px;
        border-radius: 50px;
        background-color: rgba(95, 205, 252, 0.37);
        height: 23.8px;
        width: 0; /* JS에서 동적으로 설정 */
      }
      /* 좌우 선택지 박스 기본 스타일 */
      .aside_window {
        position: absolute;
        width: 400px; /* 선택지 너비 (적절히 조절) */
        height: 400px; /* 선택지 높이 */
        background: rgba(108, 211, 255, 0.7);
        box-shadow: 100px 100px 100px;
        border-radius: 40px;
        filter: blur(29.35px);
        z-index: 3; /* 캐릭터(z-index:2) 위에 표시 */
        cursor: pointer;
      }
      .choice-container {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      /* 왼쪽 선택지 */
      .choice-left {
        left: 10%;
        top: 45%;
        transform: translateY(-50%);
      }
      /* 선택지 내부 텍스트 */
      .text-left {
        position: absolute;
        top: 45%;
        left: 23%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-size: 1.8rem;
        text-align: center;
        width: 350px;
        z-index: 10;
      }
    </style>
  </head>

  <body>
    <div class="page">
      <!-- 배경 -->
      <img
        src="./image/background/채용성공화면.png"
        alt="배경"
        class="bg-image"
      />

      <!-- 캐릭터 (합격 표정) -->
      <img
        src="./image/man/남자_서류_합격표정.png"
        alt="캐릭터"
        class="character"
      />

      <!-- 합격 문구 -->
      <!-- 왼쪽 선택지: step만 초기화 -->
      <div class="choice-container">
        <div class="aside_window choice-left"></div>
        <div class="text-left">첫번째 시즌에<br />취업 성공!</div>
      </div>

      <!-- 오른쪽 상태창 -->
      <div class="div102">
        <div class="item"></div>
        <div class="div103">
          <div class="rectangle-parent">
            <div class="group-inner"></div>
            <div class="rectangle-div"></div>
            <div class="group-child1"></div>
            <div class="cs">cs 지식</div>
            <div class="div104">80 / 100</div>
            <div class="group-child2"></div>
          </div>
          <div class="group-parent">
            <div class="rectangle-group">
              <div class="group-inner"></div>
              <div class="rectangle-div"></div>
              <div class="group-child1"></div>
            </div>
            <div class="div105">건강</div>
            <div class="group-child6"></div>
            <div class="div104">48 / 100</div>
          </div>
          <div class="rectangle-container">
            <div class="group-inner"></div>
            <div class="rectangle-div"></div>
            <div class="group-child1"></div>
            <div class="div107">외국어</div>
            <div class="group-child10"></div>
            <div class="div104">63 / 100</div>
          </div>
          <div class="group-div">
            <div class="group-inner"></div>
            <div class="rectangle-div"></div>
            <div class="group-child1"></div>
            <div class="pt">PT 능력</div>
            <div class="group-child14"></div>
            <div class="div104">38 / 100</div>
          </div>
          <div class="rectangle-parent1">
            <div class="group-inner"></div>
            <div class="rectangle-div"></div>
            <div class="group-child1"></div>
            <div class="div110">코테 실력</div>
            <div class="group-child6"></div>
            <div class="div104">48 / 100</div>
          </div>
          <div class="rectangle-group">
            <div class="rectangle-group">
              <div class="group-inner"></div>
              <div class="rectangle-div"></div>
              <div class="group-child1"></div>
            </div>
            <div class="div110">개발 능력</div>
            <div class="group-child6"></div>
            <div class="div104">48 / 100</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 로컬 스토리지에서 stats 불러오기
      const gameData = JSON.parse(localStorage.getItem("gameData")) || {};
      const stats = gameData.stats || {
        개발능력: 40,
        코테실력: 50,
        CS지식: 60,
        PT능력: 70,
        외국어: 80,
        건강: 90,
      };

      // 각 막대 폭을 동적으로 설정
      // 막대 최대 폭 = 232 - 3.49px*2(테두리 여백 고려) 정도이나,
      // 여기서는 편의상 232px을 100으로 보고 비례
      function fillBar(statValue, barElement) {
        // 최대값 100 기준 비례
        const max = 100;
        const ratio = Math.min(statValue / max, 1); // 0~1 범위
        const barWidth = 232 * ratio - 7; // 약간 여백 감안 (테두리)
        barElement.style.width = barWidth + "px";
      }

      // DOM 로드 후 각 스탯의 막대를 채우기
      document.addEventListener("DOMContentLoaded", () => {
        fillBar(stats["개발능력"] || 0, document.getElementById("dev-bar"));
        fillBar(stats["코테실력"] || 0, document.getElementById("test-bar"));
        fillBar(stats["CS지식"] || 0, document.getElementById("cs-bar"));
        fillBar(stats["PT능력"] || 0, document.getElementById("pt-bar"));
        fillBar(stats["외국어"] || 0, document.getElementById("lang-bar"));
        fillBar(stats["건강"] || 0, document.getElementById("health-bar"));
      });
    </script>
  </body>
</html>
